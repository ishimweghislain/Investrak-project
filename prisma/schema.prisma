generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            String         @id @default(cuid())
  username      String         @unique
  email         String         @unique
  password      String
  firstName     String?
  lastName      String?
  company       String?
  role          Role           @default(INVESTOR)
  profileImage  String?
  createdAt     DateTime       @default(now())
  updatedAt     DateTime       @updatedAt
  auditLogs     AuditLog[]
  investments   Investment[]
  notifications Notification[]
  reports       Report[]
  transactions  Transaction[]

  @@map("users")
}

model Investment {
  id           String           @id @default(cuid())
  title        String
  amount       Float
  status       InvestmentStatus @default(PENDING)
  roi          Float?
  startDate    DateTime?
  maturityDate DateTime?
  userId       String
  createdAt    DateTime         @default(now())
  updatedAt    DateTime         @updatedAt
  user         User             @relation(fields: [userId], references: [id])
  returns      Return[]

  @@map("investments")
}

model Transaction {
  id          String   @id @default(cuid())
  type        String
  amount      Float
  status      String
  date        DateTime @default(now())
  description String?
  userId      String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  user        User     @relation(fields: [userId], references: [id])

  @@map("transactions")
}

model Return {
  id           String     @id @default(cuid())
  amount       Float
  date         DateTime
  investmentId String
  createdAt    DateTime   @default(now())
  updatedAt    DateTime   @updatedAt
  investment   Investment @relation(fields: [investmentId], references: [id])

  @@map("returns")
}

model Report {
  id        String   @id @default(cuid())
  title     String
  url       String
  type      String
  userId    String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  user      User     @relation(fields: [userId], references: [id])

  @@map("reports")
}

model Notification {
  id        String   @id @default(cuid())
  message   String
  isRead    Boolean  @default(false)
  userId    String
  createdAt DateTime @default(now())
  user      User     @relation(fields: [userId], references: [id])

  @@map("notifications")
}

model AuditLog {
  id        String   @id @default(cuid())
  action    String
  details   String?
  ipAddress String?
  userId    String
  createdAt DateTime @default(now())
  user      User     @relation(fields: [userId], references: [id])

  @@map("audit_logs")
}

model SiteSetting {
  id    String @id @default(cuid())
  key   String @unique
  value String
}

model Service {
  id          String   @id @default(cuid())
  title       String
  description String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model TeamMember {
  id          String   @id @default(cuid())
  name        String
  role        String
  photoUrl    String?
  linkedinUrl String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Testimonial {
  id          String   @id @default(cuid())
  clientName  String
  description String
  imageUrl    String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model ContactMessage {
  id        String   @id @default(cuid())
  name      String
  email     String
  phone     String?
  message   String
  createdAt DateTime @default(now())
  isRead    Boolean  @default(false)
}

enum Role {
  INVESTOR
  ADMIN
}

enum InvestmentStatus {
  ACTIVE
  PENDING
  MATURED
  CLOSED
}
